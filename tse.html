---
layout: default
id: tse
---
<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/topojson-client@3"></script>
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="title">Tribunal Supremo <br/><span class="title-orange">Electoral</span></h1>
    </div>
  </div>
  <div class="row content">
    <div class="col-12">
      <p>Proximamente podras encontrar:</p>
      <ul>
        <li>Observación del desempeño del Tribunal Supremo Electoral y de sus órganos temporales. Especial énfasis en el funcionamiento de las Unidades de Control y Fiscalización y de Medios de Comunicación y Estudios de Opinión Pública. Seguimiento general del cumplimiento de la LEPP y del calendario electoral.</li>
      </ul>
    </div>
  </div>
  <div class="row content">
    <div class="col-12">
      <h2>Municipios según su nivel de riesgo de conflictividad electoral</h2>
      <div id="container" class="svg-container"></div>
        <script type="text/javascript">
          var w = 600;
          var h = 600;
          var svg = d3.select("div#container").append("svg").attr("preserveAspectRatio", "xMinYMin meet")
                .attr("viewBox", "0 0 " + w + " " + h).style("background","#fff")
                .classed("svg-content", true);
          var projection = d3.geoMercator()
                            .translate([w/2, h/2])
                            .scale(7701.467646382165)
                            .center([-90.23084508112287,15.888754053851084]);
          var path = d3.geoPath().projection(projection);
          var gtMap = d3.json("../assets/munis.topojson");
          var cities = d3.csv("../assets/munis.csv");
          tooltip = d3.select("div#container").append("div")
            .attr("id","tooltip")
            .attr("class","tooltip");
          Promise.all([gtMap, cities]).then(function(values){
          // draw map
              var outlines = topojson.feature(values[0], values[0].objects.collection);
              var muniData = [];
              for (var i in values[1]) {
                muniData[values[1][i]["CODIGO"]] = values[1][i];
              }
              svg.selectAll("path")
                  .data(outlines.features)
                  .enter()
                  .append("path")
                  .attr("d", path)
                  .style('fill', function(d) {
                    if(d.properties["CODIGO"] in muniData) {
                      switch(muniData[d.properties["CODIGO"]]["Nivel de riesgo"]) {
                        case "1": return "#92D051"; break;
                        case "2": return "#FFFF00"; break;
                        case "3": return "#ED7D31"; break;
                        case "4": return "#FE0000"; break;
                      }
                    }
                    return "#c9e8fd";
                  })
                  .style('stroke','black')
                  .style('stroke-width','0.3px')
                  .on('click', function(d) {
                    self.tooltip.transition()
                      .duration(1)
                      .style("left", "0px")
                      .style("top", "0px");
                    jQuery("#departmentName").html(muniData[d.properties["CODIGO"]]["Departamento"]);
                    jQuery("#departmentDetails").html("<div class='detail-header'><div class='header-muni'>Municipio</div><div class='header-nr'>Nivel de riesgo</div></div>");
                    jQuery("#departmentDetails").append("<div class='detail-body'>");
                    var NR = "";
                    for (var i in values[1]) {
                      if (d.properties["COD_DEP"] == values[1][i]["COD_DEP"]) {
                        switch(values[1][i]["Nivel de riesgo"]) {
                          case "1": NR = "Bajo"; break;
                          case "2": NR = "Medio"; break;
                          case "3": NR = "Alto"; break;
                          case "4": NR = "Extremo"; break;
                        }
                        jQuery("#departmentDetails").append("<div class='detail-row'><div class='muni-name'>"+values[1][i]["Municipio"]+"</div><div class='muni-nr'><div class='square "+NR+"'></div>"+NR+"</div></div>");
                      }
                    }
                    jQuery("#departmentDetails").append("</div><!--detail-body-->");
                    jQuery("#departmentData").modal();
                  })
                  .on('mouseover', function(d,i) {
                    self.tooltip.transition()
                      .duration(200)
                      .style("opacity", 1);
                    if(d.properties["CODIGO"] in muniData) {
                      switch(muniData[d.properties["CODIGO"]]["Nivel de riesgo"]) {
                        case "1": NR = "Bajo"; break;
                        case "2": NR = "Medio"; break;
                        case "3": NR = "Alto"; break;
                        case "4": NR = "Extremo"; break;
                      }
                    }
                    self.tooltip.html("<h1>"+muniData[d.properties["CODIGO"]]["Departamento"]+" - "
                                      +muniData[d.properties["CODIGO"]]["Municipio"]+"</h1>"+NR
                                    )
                      .style("left", (event.pageX - jQuery(document).scrollLeft() - jQuery('div#container').offset().left)+"px")
                      .style("top", (event.pageY - jQuery('div#container').offset().top)+"px");
                  })
                  .on('mouseout', function(d) {
                    self.tooltip.transition()
                      .duration(500)
                      .style("opacity",0);
                  });
          });
        </script>
        <div class="modal" id="departmentData" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="departmentName">Modal title</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" id="departmentDetails"></div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <h2>Padrón electoral</h2>
        <p>El número de empadronados al 17 de marzo es de 7,953,187 distribuido en 4, 272,208 mujeres correspondiente al 53.72%, y 3,680,979 hombres correspondiente al 46.28 %</p>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-12 col-lg-6">
        <div id="padron2019"></div>
        <script type="text/javascript">
          var data = [
                {name: 'Hombres', count: 3680979, percentage: 46.3, color: "#222c58"},
                {name: 'Mujeres', count: 4272208, percentage: 53.7, color: "#f7a520"},
              ];
          var width = parseInt(d3.select("#padron2019").style("width"));
          var height = width * 0.75;
          var radius = (Math.min(width, height) / 2);
          var radius = radius * 0.4;
          var svgPadron = d3.select("div#padron2019")
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .append('g')
                .attr('transform', 'translate(' + (width/2) + ',' + (height/2) + ')');

          var tooltipP2019 = d3.select("div#padron2019").append("div")
                .attr("id","tooltipP2019")
                .attr("class","tooltip");

          var arc = d3.arc()
                .outerRadius(radius - 10)
                .innerRadius(radius - (radius/2));

          var pie = d3.pie()
                .sort(null)
                .value(function(d) {
                  return d.percentage;
                });

          var g = svgPadron.selectAll(".arc")
                .data(pie(data))
                .enter().append('g')
                .on('mouseover', function(d,i) {
                  self.tooltipP2019.transition()
                    .duration(200)
                    .style("opacity", 1);
                  self.tooltipP2019.html(d.data.count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+" personas")
                      .style("left", (event.pageX - jQuery(document).scrollLeft() - jQuery('div#padron2019').offset().left)+"px")
                      .style("top", (event.pageY - jQuery('div#padron2019').offset().top)+"px");
                })
                .on('mouseout', function(d) {
                  self.tooltipP2019.transition()
                    .duration(500)
                    .style("opacity",0);
                });

          g.append("path")
            .attr("d", arc)
            .style("fill", function(d,i) {
              return d.data.color;
            });

          g.append("text")
            .attr("transform", function(d) {
              var _d = arc.centroid(d);
              _d[0] *= 2;
              _d[1] *= 1.5;
              return "translate(" + _d + ")";
            })
            .attr("dy", "0.5em")
            .style("text-anchor", "middle")
            .text(function(d) {
              return d.data.name + ':' + d.data.percentage + '%';
            });
        </script>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <h2>Crecimiento en el padrón</h2>
        <p>El total de empadronados a la fecha establecida fue de 7,678,069 cifra que refleja un incremento inter electoral respecto del 31 de diciembre del año 2014 de 2.28% habiéndose empadronado durante cuatro años 171,173 nuevos ciudadanos.</p>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-12 col-lg-6">
        <div id="padronComparativo"></div>
        <script type="text/javascript">
          var data = [
                {year: '2007', count: 5990029},
                {year: '2011', count: 7340841},
                {year: '2015', count: 7556873},
                {year: '2019', count: 7953187},
              ];
          var margin = {top: 20, right: 20, bottom: 30, left: 70};
          var width = parseInt(d3.select("#padronComparativo").style("width")) - margin.left - margin.right;
          var height = width/2 - margin.top - margin.bottom;
          var yScale = d3.scaleLinear()
              .range([height, 0])
              .domain([0, d3.max(data, function(d) { return d["count"]; })]);
          var xScale = d3.scaleBand()
              .range([0, width])
              .domain(data.map(function(d) { return d["year"]; }))
              .padding(0.1);
          var svgPadronC = d3.select("div#padronComparativo")
                .append('svg')
                .attr('width', width+margin.left+margin.right)
                .attr('height', height+margin.top+margin.bottom)
                .append('g')
                .attr('transform', 'translate('+margin.left+','+margin.top+')');
          var tooltipPC = d3.select("div#padronComparativo").append("div")
                .attr("id","tooltipPComparativo")
                .attr("class","tooltip");
          var g = svgPadronC.selectAll(".bar")
                .data(data)
                .enter()
                .append('rect')
                .attr("class","bar")
                .attr("x", function(d) { return xScale(d["year"]); })
                .attr("width", xScale.bandwidth() )
                .attr("y", function(d) { return yScale(d["count"]); })
                .attr("height", function(d) { return height - yScale(d["count"]); })
                .on('mouseover', function(d,i) {
                  self.tooltipPC.transition()
                    .duration(200)
                    .style("opacity", 1);
                  self.tooltipPC.html(d.count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+" personas")
                      .style("left", (event.pageX - jQuery(document).scrollLeft() - jQuery('div#padronComparativo').offset().left)+"px")
                      .style("top", (event.pageY - jQuery('div#padronComparativo').offset().top)+"px");
                })
                .on('mouseout', function(d) {
                  self.tooltipPC.transition()
                    .duration(500)
                    .style("opacity",0);
                });
          svgPadronC.append("g")
            .attr("transform", "translate(0, "+height+")")
            .call(d3.axisBottom(xScale));
            
          svgPadronC.append("g")
            .call(d3.axisLeft(yScale));
        </script>
      </div>
    </div>
  </div>
</div>
<div class="bottom-menu">
  {% include viz-menu.html %}
</div>
